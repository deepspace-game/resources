<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEEPSPACE Resources Chart</title>
    <style>
        .charts-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 columns for charts */
            gap: 10px;
            margin-bottom: 20px;
        }
        iframe {
            border: 2px solid #ddd; /* Added border style */
            box-shadow: 0 0 5px rgba(0,0,0,0.2); /* Optional: added a subtle shadow for depth */
            width: 100%;
            height: 400px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
    <meta http-equiv="Pragma" content="no-cache">
    <base target="_blank">
    <script type="text/javascript" src="https://d3js.org/d3.v7.min.js"></script>
    <script type="text/javascript">
        noFormatDecimal = d3.format(",.0f");
	mediumFormatDecimal = d3.format(",.2f");
        largeFormatDecimal = d3.format(",.4f");

// Get the current URL
const currentURL = window.location.href;
let resourcesURL = ""

// Check if the URL contains "resources.deepspace.game"
if (currentURL.includes("resources.deepspace.game")) {
  // Use the variable with a specific value
  resourcesURL = "https://resources.deepspace.game/api";
  console.log(resourcesURL);
} else if (currentURL.includes("dev-resources.deepspace.game")) {
  // Adjust the variable value for dev-resources.deepspace.game
  resourcesURL = "https://dev-resources.deepspace.game/api";
  console.log(resourcesURL);
} else {
  // Handle other cases if needed
  resourcesURL = "https://resources.deepspace.game/api";
  console.log("URL does not match expected patterns");
}

        fetch(resourcesURL)
            .then(response => response.json())
            .then(data => {
		console.log(data);
                const tableBody = document.getElementById('data');
                data.forEach(item => {
                    let resourceType = '';
                    switch (item.poolId) {
                        case 0:
                            resourceType = 'Iron';
                            break;
                        case 1:
                            resourceType = 'Seplium';
                            break;
                        case 2:
                            resourceType = 'Hydrogen';
                            break;
                        case 3:
                            resourceType = 'Fenna';
                            break;
                        case 4:
                            resourceType = 'Bedasine';
                            break;
                        case 5:
                            resourceType = 'Netherite';
                            break;
                        case 6:
                            resourceType = 'Xanifarium';
                            break;
                        case 7:
                            resourceType = 'Promethium';
                            break;
                        default:
                            resourceType = 'N/A';
                    }
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${resourceType}</td>
                        <td>${largeFormatDecimal(item.dpsBalance)}</td>
                        <td>${noFormatDecimal(item.resourceBalance)}</td>
                        <td>${mediumFormatDecimal(item.price)}</td>
                    `;
                    tableBody.appendChild(row);
                });
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
    </script>
</head>
<body>
    <h1>DEEPSPACE Resources Chart</h1>
    <h2>About DEEPSPACE</h2>
    <p><b>Welcome to the DEEPSPACE Metaverse!</b><br/>
    DEEPSPACE is a Play-to-Earn space multiverse exploration strategy game!<br/>
    Earn passive income from holding $DPS, trading NFTs, and taking risks as you explore DEEPSPACE with your fleet of ships!<br/>
    Prepare to explore, harvest, and fight your way through the DEEPSPACE universe!<br/>
    Learn more at: <a href="https://deepspace.game">https://deepspace.game</a><br/>
    Buy DEEPSPACE (DPS) at: <a href="https://app.deepspace.game">https://app.deepspace.game</a></p>
	
    <p><i>Tip: Check the console log for the full JSON response from the resources api</i></p>
    <p>Pro Tip: Command Supported: <a href="https://resources.deepspace.game/api">https://resources.deepspace.game/api</a></p>

    <!-- Existing table and content from provided HTML -->
    <table>
        <thead>
            <tr>
                <th>Resource Name</th>
                <th>DPS Balance</th>
                <th>Resource Balance</th>
                <th>Price (DPS)</th>
            </tr>
        </thead>
        <tbody id="data"></tbody>
    </table>
	
    <!-- Charts Container -->
    <div class="charts-container">
        <!-- Add the iframe tags for each chart here -->
        <iframe src="https://chart-embed.service.newrelic.com/herald/42a4d19a-5902-40d4-b8d3-c18e8b817a9c?height=400px&timepicker=true"></iframe>
        <iframe src="https://chart-embed.service.newrelic.com/herald/f25bb5f2-a015-46dc-a187-865a4ac0536b?height=400px&timepicker=true"></iframe>
        <iframe src="https://chart-embed.service.newrelic.com/herald/fa213be4-706e-4283-9944-cf4a756d973d?height=400px&timepicker=true"></iframe>
        <iframe src="https://chart-embed.service.newrelic.com/herald/c791a777-7863-4cd2-9d0a-b6777002c3a7?height=400px&timepicker=true"></iframe>
        <iframe src="https://chart-embed.service.newrelic.com/herald/997163ac-e2af-4880-a84a-afb6b4e67002?height=400px&timepicker=true"></iframe>
        <iframe src="https://chart-embed.service.newrelic.com/herald/8463949e-a3d0-489f-a717-ceb6dbf2088c?height=400px&timepicker=true"></iframe>
        <iframe src="https://chart-embed.service.newrelic.com/herald/cae0b546-9b6f-4488-98ea-e29bdaa74179?height=400px&timepicker=true"></iframe>
        <iframe src="https://chart-embed.service.newrelic.com/herald/4d0ef75f-435f-45a8-8ede-18d6557c43a0?height=400px&timepicker=true"></iframe>
    </div>

    <br/>
</body>
</html>
